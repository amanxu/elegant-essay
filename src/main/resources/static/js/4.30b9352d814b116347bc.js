webpackJsonp([4],{"51l+":function(e,t,s){var a=s("CYMr");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);s("rjj0")("4ae108f3",a,!0)},CYMr:function(e,t,s){(e.exports=s("FZ+f")(!0)).push([e.i,"\n.app-container[data-v-6760eefe] {\n  padding: 20px;\n}\n.pagination-container[data-v-6760eefe] {\n  margin-top: 30px;\n}\n","",{version:3,sources:["D:/vuework/essay-admin-vue-h5/src/views/users/list.vue"],names:[],mappings:";AACA;EACE,cAAc;CACf;AACD;EACE,iBAAiB;CAClB",file:"list.vue",sourcesContent:["\n.app-container[data-v-6760eefe] {\n  padding: 20px;\n}\n.pagination-container[data-v-6760eefe] {\n  margin-top: 30px;\n}\n"],sourceRoot:""}])},"To/2":function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=s("TIfe"),r=s("vMJZ"),o={name:"list",props:{},components:{},data:function(){var e=this;return{dialogStatus:"create",dialogFormVisible:!1,userTypeCode:-1,userTypes:[{code:0,msg:"超级管理员"},{code:1,msg:"普通用户"}],headers:{},modifyData:"",userForm:{userId:"",userName:"",realName:"",phone:null,userType:null,password:"",checkPass:""},rules:{userName:[{required:!0,message:"请输入用户名",trigger:"blur"}],realName:[{required:!0,message:"请输入真实姓名",trigger:"blur"}],userType:[{required:!0,message:"请选择用户类型",trigger:"blur"}],phone:[{validator:function(e,t,s){if(!t)return s(new Error("手机号不能为空"));if(!/^1[3|4|5|7|8][0-9]\d{8}$/.test(t))return s(new Error("请输入正确的手机号"));s()},trigger:"blur"}],password:[{required:!0,validator:function(t,s,a){""===s?a(new Error("请输入密码")):(""!==e.userForm.checkPass&&e.$refs.userForm.validateField("checkPass"),a())},trigger:"blur"}],checkPass:[{required:!0,validator:function(t,s,a){""===s?a(new Error("请再次输入密码")):s!==e.userForm.password?a(new Error("两次输入密码不一致!")):a()},trigger:"blur"}]},list:null,total:null,listLoading:!0,listQuery:{userName:"",pageNo:1,pageSize:10},tableKey:0,pageBoolean:{delColor:"primary",delText:"批量删除",addColor:"success",addText:"添加用户"}}},created:function(){},mounted:function(){this.headers={accessToken:Object(a.a)()},this.getList()},watch:{},methods:{addForm:function(){var e=this;this.$refs.userForm.validate(function(t){if(!t)return!1;Object(r.b)(e.userForm).then(function(t){0===t.code?(e.dialogFormVisible=!1,e.$message({message:"新增成功",type:"success"}),e.getList()):e.$message(t.msg)}).catch(function(e){console.log(e.message)})})},updateForm:function(){var e=this;this.$refs.userForm.validate(function(t){if(!t)return!1;Object(r.f)(e.userForm).then(function(t){0===t.code?(e.dialogFormVisible=!1,e.$message({message:"更新成功",type:"success"}),e.getList()):e.$message(t.msg)}).catch(function(e){console.log(e.message)})})},userCreate:function(){this.userForm={userId:"",userName:"",realName:"",phone:null,userType:null,password:"",checkPass:""},this.dialogFormVisible=!0,this.dialogStatus="create",this.$refs.userForm.resetFields()},getList:function(){var e=this;Object(r.e)(this.listQuery).then(function(t){var s=t.code,a=t.data,r=a.list,o=a.total;0===s?(e.list=r,e.total=o,0===e.total&&e.$message({message:"用户列表为空",type:"warning"}),e.listLoading=!1):(e.listLoading=!1,e.$message(t.msg))}).catch(function(e){console.log(e.message)})},userModify:function(e){var t=this;Object(r.c)(e.userId).then(function(e){var s=e.code,a=e.data;0===s&&(t.userForm=a,t.userForm.checkPass=a.password,t.dialogFormVisible=!0,t.dialogStatus="update",t.$refs.userForm.resetFields())})},modifyComplete:function(e){if(!e)return!1;this.getList(),this.dialogFormVisible=!1},warnBeforeDelete:function(e,t){var s=this;this.$confirm("确认删除当前用户？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"error"}).then(function(a){s.batchDelete(e,t)}).catch(function(e){return console.log(e)})},batchDelete:function(e,t){var s=this;Object(r.a)(t.userId).then(function(t){if(0===t.code){s.$message({message:"删除成功",type:"success"});s.list.indexOf(e);s.list.splice(e,1),s.total--}else s.$message({message:"删除失败",type:"error"})}).catch(function(e){console.log(e.message)})},handleFilter:function(){this.listQuery.pageNo=1,this.getList()},handleSizeChange:function(e){this.listQuery.pageSize=e,this.getList()},handleCurrentChange:function(e){this.listQuery.pageNo=e,this.getList()},handleRefresh:function(){this.list=null,this.total=null,this.listQuery.pageNo=1,this.getList()}}},n={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"app-container calendar-list-container"},[s("div",{staticClass:"filter-container",staticStyle:{"margin-bottom":"20px"}},[s("span",{staticStyle:{"margin-right":"10px"}},[e._v("账户名")]),e._v(" "),s("el-input",{staticClass:"filter-item",staticStyle:{width:"200px","margin-left":"10px"},attrs:{placeholder:"账户名/姓名"},nativeOn:{keyup:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key))return null;e.handleFilter(t)}},model:{value:e.listQuery.userName,callback:function(t){e.$set(e.listQuery,"userName",t)},expression:"listQuery.userName"}}),e._v(" "),s("el-button",{staticClass:"filter-item",staticStyle:{"margin-left":"10px"},attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.handleFilter}},[e._v("搜索\n    ")]),e._v(" "),s("el-button",{staticClass:"filter-item",staticStyle:{"margin-left":"10px"},attrs:{type:e.pageBoolean.addColor,icon:"el-icon-plus"},on:{click:e.userCreate}},[e._v(e._s(e.pageBoolean.addText)+"\n    ")])],1),e._v(" "),s("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],key:e.tableKey,ref:"list",staticStyle:{width:"100%"},attrs:{data:e.list,"element-loading-text":"数据加载中，请稍后",border:"",fit:"","highlight-current-row":"","select-on-indeterminate":""}},[s("el-table-column",{attrs:{align:"center",label:"ID","min-width":"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("span",{staticClass:"link-type"},[e._v(e._s(t.row.userId))])]}}])}),e._v(" "),s("el-table-column",{attrs:{align:"center",label:"用户名","min-width":"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("span",{staticClass:"link-type"},[e._v(e._s(t.row.userName))])]}}])}),e._v(" "),s("el-table-column",{attrs:{"min-width":"120",align:"center",label:"姓名","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[s("span",[e._v(e._s(t.row.realName))])]}}])}),e._v(" "),s("el-table-column",{attrs:{"min-width":"100",align:"center",label:"用户类型","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[s("span",{class:{adminColor:0===t.row.userType,normalColor:1===t.row.userType}},[e._v(e._s(t.row.userTypeDesc))])]}}])}),e._v(" "),s("el-table-column",{attrs:{"min-width":"120",align:"center",label:"手机号","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[s("span",[e._v(e._s(t.row.phone))])]}}])}),e._v(" "),s("el-table-column",{attrs:{"min-width":"100",align:"center",label:"创建时间","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[s("span",[e._v(e._s(e._f("dateformat")(t.row.createTime,"YYYY-MM-DD")))])]}}])}),e._v(" "),s("el-table-column",{attrs:{align:"center",label:"操作","min-width":"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(s){e.userModify(t.row)}}},[e._v("编辑\n        ")]),e._v(" "),s("el-button",{attrs:{size:"small",type:"danger"},on:{click:function(s){e.warnBeforeDelete(t.$index,t.row)}}},[e._v("删除\n        ")])]}}])})],1),e._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:!e.listLoading,expression:"!listLoading"}],staticClass:"pagination-container"},[s("el-pagination",{attrs:{"current-page":e.listQuery.pageNo,"page-sizes":[10,20,30,50],"page-size":e.listQuery.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange,"update:currentPage":function(t){e.$set(e.listQuery,"pageNo",t)}}})],1),e._v(" "),s("el-dialog",{attrs:{title:"create"==e.dialogStatus?"新增用户":"编辑用户",visible:e.dialogFormVisible,center:""},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[s("el-form",{ref:"userForm",attrs:{model:e.userForm,rules:e.rules}},[s("el-form-item",{attrs:{label:"用户名","label-width":"80px",prop:"userName"}},[s("el-input",{attrs:{"auto-complete":"off",maxlength:"64",placeholder:"请输入用户名"},model:{value:e.userForm.userName,callback:function(t){e.$set(e.userForm,"userName",t)},expression:"userForm.userName"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"姓名","label-width":"80px",prop:"realName"}},[s("el-input",{attrs:{"auto-complete":"off",maxlength:"12",placeholder:"请输入真实姓名"},model:{value:e.userForm.realName,callback:function(t){e.$set(e.userForm,"realName",t)},expression:"userForm.realName"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"手机号","label-width":"80px",prop:"phone"}},[s("el-input",{attrs:{"auto-complete":"off",maxlength:"11",placeholder:"请输入手机号"},model:{value:e.userForm.phone,callback:function(t){e.$set(e.userForm,"phone",e._n(t))},expression:"userForm.phone"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"用户类型",prop:"userType"}},[s("el-select",{attrs:{placeholder:"请选择"},model:{value:e.userForm.userType,callback:function(t){e.$set(e.userForm,"userType",t)},expression:"userForm.userType"}},e._l(e.userTypes,function(e){return s("el-option",{key:e.code,attrs:{label:e.msg,value:e.code}})}))],1),e._v(" "),s("el-form-item",{attrs:{label:"密码",prop:"password"}},[s("el-input",{attrs:{type:"password",minlength:"6","auto-complete":"off"},model:{value:e.userForm.password,callback:function(t){e.$set(e.userForm,"password",t)},expression:"userForm.password"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"确认密码",prop:"checkPass"}},[s("el-input",{attrs:{type:"password",minlength:"6","auto-complete":"off"},model:{value:e.userForm.checkPass,callback:function(t){e.$set(e.userForm,"checkPass",t)},expression:"userForm.checkPass"}})],1)],1),e._v(" "),s("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),e._v(" "),"create"==e.dialogStatus?s("el-button",{attrs:{type:"primary"},on:{click:e.addForm}},[e._v("确 定")]):s("el-button",{attrs:{type:"primary"},on:{click:e.updateForm}},[e._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var i=s("VU/8")(o,n,!1,function(e){s("51l+"),s("mCBv")},"data-v-6760eefe",null);t.default=i.exports},bo1t:function(e,t,s){(e.exports=s("FZ+f")(!0)).push([e.i,"\n.adminColor {\n  color: #67c23a;\n}\n.normalColor {\n  color: #409EFF;\n}\n.dialogModifyLessonManage .el-dialog__header {\n  padding-bottom: 0;\n}\n.dialogModifyLessonManage .el-dialog__body {\n  padding: 0;\n}\n.dialogModifyLessonManage .createPost-main-container {\n  padding: 20px 0 !important;\n}\n","",{version:3,sources:["D:/vuework/essay-admin-vue-h5/src/views/users/list.vue"],names:[],mappings:";AACA;EACE,eAAe;CAChB;AACD;EACE,eAAe;CAChB;AACD;EACE,kBAAkB;CACnB;AACD;EACE,WAAW;CACZ;AACD;EACE,2BAA2B;CAC5B",file:"list.vue",sourcesContent:["\n.adminColor {\n  color: #67c23a;\n}\n.normalColor {\n  color: #409EFF;\n}\n.dialogModifyLessonManage .el-dialog__header {\n  padding-bottom: 0;\n}\n.dialogModifyLessonManage .el-dialog__body {\n  padding: 0;\n}\n.dialogModifyLessonManage .createPost-main-container {\n  padding: 20px 0 !important;\n}\n"],sourceRoot:""}])},mCBv:function(e,t,s){var a=s("bo1t");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);s("rjj0")("4937eec9",a,!0)}});
//# sourceMappingURL=4.30b9352d814b116347bc.js.map